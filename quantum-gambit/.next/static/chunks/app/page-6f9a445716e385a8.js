(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3388:function(e,t,s){Promise.resolve().then(s.bind(s,5440))},5440:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var i=s(7437),l=s(2265),n=s(6443);function a(e){return"abcdefgh".indexOf(e[0])}function r(e){return parseInt(e[1],10)-1}function c(e,t){return Math.abs(a(e)-a(t))===Math.abs(r(e)-r(t))}function o(e,t){let s=Math.abs(a(e)-a(t)),i=Math.abs(r(e)-r(t));return 1===s&&2===i||2===s&&1===i}let d=["d4","d5","e4","e5"],u={gravity_well:{type:"gravity_well",name:"GRAVITY WELL",description:"Center 4 squares (d4-e5) pull in adjacent pieces and destroy them!"},anarchy_mode:{type:"anarchy_mode",name:"ANARCHY MODE",description:"All pieces move like Queens for 1 turn (can only capture once)!"},elemental_fire:{type:"elemental_fire",name:"ELEMENTAL: FIRE",description:"Captures cause splash damage to adjacent pieces!"},realm_shift:{type:"realm_shift",name:"REALM SHIFT",description:"Board splits: Left=Standard, Right=Modified rules!"},chrono_sync:{type:"chrono_sync",name:"CHRONO-SYNC",description:"Unmoved pieces can teleport 1 square!"}};class x{getGame(){return this.game}getState(){return this.state}initializePieceExperience(){let e=this.game.board();for(let t=0;t<8;t++)for(let s=0;s<8;s++){let i=e[t][s];if(i){let e="".concat(String.fromCharCode(97+s)).concat(t+1);this.state.pieceExperience.has(e)||this.state.pieceExperience.set(e,{square:e,type:i.type,color:i.color,moveCount:0,captureCount:0,forksPerformed:0,knightsCaptured:0,hasCastled:!1})}}}move(e,t){if(!this.isValidQuantumMove(e,t)||!this.game.get(e))return null;let s=this.game.move({from:e,to:t});return s?(this.updatePieceExperience(s),this.applyFluxEffects(s),this.checkEvolutionTriggers(s),this.state.turnCount++,this.state.turnCount>=this.state.nextFluxTurn&&this.triggerQuantumFlux(),this.state.activeFlux&&(this.state.activeFlux.turnsRemaining--,this.state.activeFlux.turnsRemaining<=0&&this.deactivateFlux()),this.state.gravityWellActive&&this.applyGravityWell(),s):null}isValidQuantumMove(e,t){if(!this.game.get(e))return!1;let s=this.state.pieceEvolutions.get(e);return s?this.isEvolvedMoveValid(e,t,s):this.state.anarchyModeActive?c(e,t)||e[0]===t[0]||e[1]===t[1]:this.game.moves({square:e,verbose:!0}).some(e=>e.to===t)}isEvolvedMoveValid(e,t,s){switch(s.evolvedType){case"archon":return o(e,t)||c(e,t);case"phantom_knight":return o(e,t);case"sniper_bishop":return c(e,t);case"royal_guard":let i=this.game.moves({square:e,verbose:!0}).some(e=>e.to===t),l=c(e,t)&&1===Math.abs(e.charCodeAt(0)-t.charCodeAt(0));return i||l;default:return!1}}updatePieceExperience(e){let t=this.state.pieceExperience.get(e.from);t&&(t.moveCount++,e.captured&&t.captureCount++,this.state.pieceExperience.delete(e.from),t.square=e.to,this.state.pieceExperience.set(e.to,t))}applyFluxEffects(e){this.state.activeFlux&&"elemental_fire"===this.state.activeFlux.type&&e.captured&&this.applyFireDamage(e.to)}applyFireDamage(e){(function(e){let t=[],s=e.charCodeAt(0),i=parseInt(e[1]);for(let e=-1;e<=1;e++)for(let l=-1;l<=1;l++){if(0===e&&0===l)continue;let n=s+e,a=i+l;n>=97&&n<=104&&a>=1&&a<=8&&t.push("".concat(String.fromCharCode(n)).concat(a))}return t})(e).forEach(e=>{let t=this.game.get(e);t&&console.log("\uD83D\uDD25 Fire damage: ".concat(t.type," on ").concat(e))})}checkEvolutionTriggers(e){let t=this.state.pieceExperience.get(e.to);if(!t)return;let s=this.game.get(e.to);if(s){if("p"===s.type){let t="w"===s.color?"8":"1";e.to[1]===t&&this.evolvePiece(e.to,"archon")}"n"===s.type&&t.forksPerformed>=3&&this.evolvePiece(e.to,"phantom_knight"),"b"===s.type&&t.knightsCaptured>=2&&this.evolvePiece(e.to,"sniper_bishop"),"r"===s.type&&t.hasCastled&&this.evolvePiece(e.to,"royal_guard")}}evolvePiece(e,t){let s=this.game.get(e);if(!s)return;let i={square:e,originalType:s.type,evolvedType:t,color:s.color};this.state.pieceEvolutions.set(e,i),console.log("✨ Evolution: ".concat(s.type," → ").concat(t," at ").concat(e))}triggerQuantumFlux(){let e=function(){let e=["gravity_well","anarchy_mode","elemental_fire","realm_shift","chrono_sync"];return e[Math.floor(Math.random()*e.length)]}();this.state.activeFlux=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;return{...u[e],turnsRemaining:t}}(e),this.state.nextFluxTurn=this.state.turnCount+5,this.state.gravityWellActive="gravity_well"===e,this.state.anarchyModeActive="anarchy_mode"===e,console.log("⚡ QUANTUM FLUX: ".concat(this.state.activeFlux.name))}deactivateFlux(){var e;console.log("✓ Flux ended: ".concat(null===(e=this.state.activeFlux)||void 0===e?void 0:e.name)),this.state.activeFlux=null,this.state.gravityWellActive=!1,this.state.anarchyModeActive=!1}applyGravityWell(){let e=function(e){let t=[],s=e.board();for(let e=0;e<8;e++)for(let i=0;i<8;i++)if(s[e][i]){let s="".concat(String.fromCharCode(97+i)).concat(e+1);(function(e){let t=e.charCodeAt(0),s=parseInt(e[1]);for(let e of d){let i=e.charCodeAt(0),l=parseInt(e[1]),n=Math.abs(t-i),a=Math.abs(s-l);if(1===n&&0===a||0===n&&1===a||1===n&&1===a)return!0}return!1})(s)&&t.push(s)}return t}(this.game);e.length>0&&console.log("\uD83C\uDF00 Gravity Well claims: ".concat(e.join(", ")))}moves(e){return this.game.moves({...e,verbose:!0})}isGameOver(){return this.game.isGameOver()}inCheck(){return this.game.inCheck()}turn(){return this.game.turn()}fen(){return this.game.fen()}reset(){this.game.reset(),this.state={turnCount:0,activeFlux:null,nextFluxTurn:5,pieceEvolutions:new Map,pieceExperience:new Map,gravityWellActive:!1,anarchyModeActive:!1},this.initializePieceExperience()}constructor(){this.game=new n.qQ,this.state={turnCount:0,activeFlux:null,nextFluxTurn:5,pieceEvolutions:new Map,pieceExperience:new Map,gravityWellActive:!1,anarchyModeActive:!1}}}let h={"w-p":"♙","w-n":"♘","w-b":"♗","w-r":"♖","w-q":"♕","w-k":"♔","b-p":"♟","b-n":"♞","b-b":"♝","b-r":"♜","b-q":"♛","b-k":"♚","w-archon":"⚜","b-archon":"⚜","w-phantom_knight":"⚔","b-phantom_knight":"⚔","w-sniper_bishop":"\uD83C\uDFAF","b-sniper_bishop":"\uD83C\uDFAF","w-royal_guard":"\uD83D\uDEE1","b-royal_guard":"\uD83D\uDEE1"};function m(e){let{type:t,color:s,isEvolved:l=!1}=e,n=h["".concat(s,"-").concat(t)]||"?";return(0,i.jsx)("div",{className:"text-4xl select-none ".concat(l?"glow-gold":""),children:n})}function p(e){let{square:t,piece:s,isLight:l,isSelected:n,isValidMove:a,isGravityWell:r,evolution:c,onClick:o}=e;return(0,i.jsxs)("div",{className:"\n        ".concat(r?"bg-purple-800 animate-pulse":n?"bg-flux-blue":a?"bg-green-600":l?"bg-nes-light":"bg-nes-accent","\n        w-16 h-16 flex items-center justify-center cursor-pointer\n        border border-nes-dark hover:brightness-110 transition-all\n        ").concat(r?"shake":"","\n      "),onClick:o,children:[s&&(0,i.jsx)(m,{type:(null==c?void 0:c.evolvedType)||s.type,color:s.color,isEvolved:!!c}),a&&!s&&(0,i.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-400 opacity-70"})]})}let v=["d4","d5","e4","e5"];function g(e){let{game:t,selectedSquare:s,validMoves:l,onSquareClick:n}=e,a=t.getGame().board(),r=t.getState(),c=r.gravityWellActive;return(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"grid grid-cols-8 gap-0 pixel-border bg-nes-dark p-2 scanlines",children:(()=>{let e=[];for(let t=7;t>=0;t--)for(let o=0;o<8;o++){let d="".concat(String.fromCharCode(97+o)).concat(t+1),u=a[t][o],x=(t+o)%2==1,h=s===d,m=l.includes(d),g=c&&v.includes(d),f=r.pieceEvolutions.get(d);e.push((0,i.jsx)(p,{square:d,piece:u,isLight:x,isSelected:h,isValidMove:m,isGravityWell:g,evolution:f,onClick:()=>n(d)},d))}return e})()}),(0,i.jsx)("div",{className:"absolute -left-8 top-2 flex flex-col justify-around h-full pixel-font text-xs",children:[8,7,6,5,4,3,2,1].map(e=>(0,i.jsx)("div",{className:"h-16 flex items-center",children:e},e))}),(0,i.jsx)("div",{className:"flex justify-around mt-2 pixel-font text-xs",children:["A","B","C","D","E","F","G","H"].map(e=>(0,i.jsx)("div",{className:"w-16 text-center",children:e},e))})]})}function f(e){let{activeFlux:t,nextFluxTurn:s,currentTurn:l}=e,n=s-l;return(0,i.jsxs)("div",{className:"space-y-4",children:[t?(0,i.jsxs)("div",{className:"pixel-border p-4 bg-nes-accent glow-blue",children:[(0,i.jsx)("div",{className:"pixel-font text-xs text-flux-blue mb-2",children:"⚡ ACTIVE FLUX"}),(0,i.jsx)("div",{className:"pixel-font text-sm mb-2",children:t.name}),(0,i.jsx)("div",{className:"text-xs mb-2",children:t.description}),(0,i.jsxs)("div",{className:"pixel-font text-xs text-evolution-gold",children:[t.turnsRemaining," turns remaining"]})]}):(0,i.jsxs)("div",{className:"pixel-border p-4 bg-nes-accent",children:[(0,i.jsx)("div",{className:"pixel-font text-xs mb-2",children:"⚪ NO ACTIVE FLUX"}),(0,i.jsx)("div",{className:"text-xs",children:"Standard chess rules apply"})]}),(0,i.jsxs)("div",{className:"pixel-border p-4 bg-nes-dark",children:[(0,i.jsx)("div",{className:"pixel-font text-xs mb-2",children:"\uD83C\uDFB2 NEXT QUANTUM FLUX"}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"pixel-font text-2xl text-evolution-gold",children:n}),(0,i.jsxs)("div",{className:"text-xs",children:["turns until",(0,i.jsx)("br",{}),"next flux event"]})]}),(0,i.jsx)("div",{className:"mt-2 w-full bg-nes-accent rounded-full h-2",children:(0,i.jsx)("div",{className:"bg-flux-blue h-2 rounded-full transition-all",style:{width:"".concat((5-n)/5*100,"%")}})})]})]})}function j(e){let{currentPlayer:t,turnCount:s,inCheck:l,isGameOver:n}=e;return(0,i.jsxs)("div",{className:"pixel-border p-4 bg-nes-dark",children:[(0,i.jsx)("div",{className:"pixel-font text-xs mb-3",children:"\uD83C\uDFAE GAME STATUS"}),(0,i.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Turn:"}),(0,i.jsx)("span",{className:"pixel-font text-evolution-gold",children:Math.ceil(s/2)})]}),(0,i.jsxs)("div",{className:"flex justify-between",children:[(0,i.jsx)("span",{children:"Player:"}),(0,i.jsx)("span",{className:"pixel-font",children:"w"===t?"⚪ WHITE":"⚫ BLACK"})]}),l&&(0,i.jsx)("div",{className:"pixel-font text-xs text-pixel-red pulse",children:"⚠️ CHECK!"}),n&&(0,i.jsx)("div",{className:"pixel-font text-xs text-evolution-gold pulse",children:"⚡ GAME OVER"})]})]})}let b={archon:"ARCHON",phantom_knight:"PHANTOM KNIGHT",sniper_bishop:"SNIPER BISHOP",royal_guard:"ROYAL GUARD"},y={archon:"⚜",phantom_knight:"⚔",sniper_bishop:"\uD83C\uDFAF",royal_guard:"\uD83D\uDEE1"};function N(e){let{evolutions:t}=e,s=Array.from(t.values());return 0===s.length?(0,i.jsxs)("div",{className:"pixel-border p-4 bg-nes-accent",children:[(0,i.jsx)("div",{className:"pixel-font text-xs mb-2",children:"✨ EVOLUTIONS"}),(0,i.jsx)("div",{className:"text-xs text-gray-400",children:"No pieces evolved yet"})]}):(0,i.jsxs)("div",{className:"pixel-border p-4 bg-nes-accent",children:[(0,i.jsx)("div",{className:"pixel-font text-xs mb-3 text-evolution-gold",children:"✨ ACTIVE EVOLUTIONS"}),(0,i.jsx)("div",{className:"space-y-2",children:s.map((e,t)=>(0,i.jsxs)("div",{className:"flex items-center gap-2 text-xs bg-nes-dark p-2 rounded",children:[(0,i.jsx)("span",{className:"text-xl",children:y[e.evolvedType]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"pixel-font text-evolution-gold",children:b[e.evolvedType]}),(0,i.jsxs)("div",{className:"text-gray-400",children:[e.square," • ","w"===e.color?"White":"Black"]})]})]},t))})]})}function C(){let[e,t]=(0,l.useState)(null),[s,n]=(0,l.useState)(null),[a,r]=(0,l.useState)([]),[,c]=(0,l.useState)({});(0,l.useEffect)(()=>{t(new x)},[]);let o=()=>c({});if(!e)return(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsx)("div",{className:"pixel-font text-2xl pulse",children:"LOADING..."})});let d=e.getState();return(0,i.jsxs)("main",{className:"min-h-screen p-8 bg-nes-dark",children:[(0,i.jsxs)("header",{className:"text-center mb-8",children:[(0,i.jsx)("h1",{className:"pixel-font text-3xl mb-2 text-flux-blue",children:"QUANTUM GAMBIT 8-BIT"}),(0,i.jsx)("p",{className:"text-sm text-nes-light",children:"Where Chess Meets Quantum Chaos"})]}),(0,i.jsxs)("div",{className:"max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(j,{currentPlayer:e.turn(),turnCount:d.turnCount,inCheck:e.inCheck(),isGameOver:e.isGameOver()}),(0,i.jsx)(N,{evolutions:d.pieceEvolutions}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("button",{onClick:()=>{e&&(e.reset(),n(null),r([]),o())},className:"pixel-button w-full",children:"\uD83D\uDD04 NEW GAME"}),(0,i.jsx)("button",{onClick:()=>alert("Coming soon: Rules & Tutorial!"),className:"pixel-button w-full",children:"\uD83D\uDCD6 RULES"})]}),(0,i.jsxs)("div",{className:"pixel-border p-4 bg-nes-accent text-xs",children:[(0,i.jsx)("div",{className:"pixel-font mb-2",children:"LEGEND"}),(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)("div",{children:"⚜ Archon (Pawn evo)"}),(0,i.jsx)("div",{children:"⚔ Phantom Knight"}),(0,i.jsx)("div",{children:"\uD83C\uDFAF Sniper Bishop"}),(0,i.jsx)("div",{children:"\uD83D\uDEE1 Royal Guard (Rook evo)"})]})]})]}),(0,i.jsx)("div",{className:"flex items-start justify-center",children:(0,i.jsx)(g,{game:e,selectedSquare:s,validMoves:a,onSquareClick:t=>{if(!e)return;if(!s){let s=e.getGame().get(t);s&&s.color===e.turn()&&(n(t),r(e.moves({square:t}).map(e=>e.to)));return}if(s===t){n(null),r([]);return}if(a.includes(t)){let i=e.move(s,t);i&&(console.log("Move made:",i),n(null),r([]),o());return}let i=e.getGame().get(t);i&&i.color===e.turn()?(n(t),r(e.moves({square:t}).map(e=>e.to))):(n(null),r([]))}})}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsx)(f,{activeFlux:d.activeFlux,nextFluxTurn:d.nextFluxTurn,currentTurn:d.turnCount}),(0,i.jsxs)("div",{className:"pixel-border p-4 bg-nes-dark text-xs",children:[(0,i.jsx)("div",{className:"pixel-font mb-3 text-flux-blue",children:"⚡ FLUX EVENTS"}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-bold",children:"\uD83C\uDF00 Gravity Well"}),(0,i.jsx)("div",{className:"text-gray-400",children:"Center squares destroy adjacent pieces"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-bold",children:"\uD83D\uDC51 Anarchy Mode"}),(0,i.jsx)("div",{className:"text-gray-400",children:"All pieces move like Queens"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-bold",children:"\uD83D\uDD25 Elemental: Fire"}),(0,i.jsx)("div",{className:"text-gray-400",children:"Captures damage nearby pieces"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-bold",children:"\uD83D\uDD00 Realm Shift"}),(0,i.jsx)("div",{className:"text-gray-400",children:"Split board with different rules"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"font-bold",children:"⏰ Chrono-Sync"}),(0,i.jsx)("div",{className:"text-gray-400",children:"Unmoved pieces can teleport"})]})]})]}),(0,i.jsxs)("div",{className:"pixel-border p-4 bg-nes-accent text-xs",children:[(0,i.jsx)("div",{className:"pixel-font mb-2",children:"\uD83D\uDCA1 TIPS"}),(0,i.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,i.jsx)("li",{children:"Flux events trigger every 5 turns"}),(0,i.jsx)("li",{children:"Pawns evolve at back rank"}),(0,i.jsx)("li",{children:"Knights evolve after 3 forks"}),(0,i.jsx)("li",{children:"Plan around the Flux timer!"})]})]})]})]}),(0,i.jsxs)("footer",{className:"text-center mt-12 text-xs text-gray-500",children:[(0,i.jsx)("p",{children:"Built with Next.js, TypeScript, and chess.js"}),(0,i.jsx)("p",{className:"pixel-font mt-2",children:"Press START to play! \uD83C\uDFAE"})]})]})}}},function(e){e.O(0,[443,971,117,744],function(){return e(e.s=3388)}),_N_E=e.O()}]);